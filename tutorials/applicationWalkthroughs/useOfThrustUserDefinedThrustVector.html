

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>6. Use of Thrust: User-defined Thrust Vector &mdash; TU Delft Astrodynamic Toolbox  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="TU Delft Astrodynamic Toolbox  documentation" href="../../index.html"/>
        <link rel="up" title="Application Walkthroughs" href="index.html"/>
        <link rel="next" title="7. Orbit Determination and Parameter Estimation" href="earthOrbiterStateEstimation.html"/>
        <link rel="prev" title="5. Use of Thrust: Thrust Force Along Velocity Vector" href="useOfThrustThrustForceAlongVelocityVector.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> TU Delft Astrodynamic Toolbox
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Start Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tutorials and Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../prerequiredKnowledge/index.html">Pre-required Knowledge</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Application Walkthroughs</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="index.html#preparation">Preparation</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html#example-tutorials">Example tutorials</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="unperturbedEarthOrbitingSatellite.html">1. Unperturbed Earth-orbiting Satellite</a></li>
<li class="toctree-l4"><a class="reference internal" href="perturbedEarthOrbitingSatellite.html">2. Perturbed Earth-orbiting Satellite</a></li>
<li class="toctree-l4"><a class="reference internal" href="unguidedCapsuleEntry.html">3. Un-guided Capsule Entry</a></li>
<li class="toctree-l4"><a class="reference internal" href="innerSolarSystemPropagation.html">4. Inner Solar System Propagation</a></li>
<li class="toctree-l4"><a class="reference internal" href="useOfThrustThrustForceAlongVelocityVector.html">5. Use of Thrust: Thrust Force Along Velocity Vector</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">6. Use of Thrust: User-defined Thrust Vector</a></li>
<li class="toctree-l4"><a class="reference internal" href="earthOrbiterStateEstimation.html">7. Orbit Determination and Parameter Estimation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tudatFeatures/index.html">Tudat Libraries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developerGuide/index.html">Developer Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">TU Delft Astrodynamic Toolbox</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Tutorials and Documentation</a> &raquo;</li>
        
          <li><a href="index.html">Application Walkthroughs</a> &raquo;</li>
        
      <li>6. Use of Thrust: User-defined Thrust Vector</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/tutorials/applicationWalkthroughs/useOfThrustUserDefinedThrustVector.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="use-of-thrust-user-defined-thrust-vector">
<span id="walkthroughsuseofthrustuserdefinedthrustvector"></span><h1>6. Use of Thrust: User-defined Thrust Vector<a class="headerlink" href="#use-of-thrust-user-defined-thrust-vector" title="Permalink to this headline">¶</a></h1>
<p>In the previous tutorial, we discussed how to include thrust in a simulation, separately specifying the direction and magnitude of the thrust force. Alternatively, however, you may want to impose the thrust vector (direction and magnitude in some reference frame) as a function of time explicitly. In this tutorial, we will look at which Tudat interfaces you can use to accomplish this. The code for this tutorial is given&nbsp;here&nbsp;on Github, and is also located in your tudat bundle at:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">tudatBundle</span><span class="o">/</span><span class="n">tudatExampleApplications</span><span class="o">/</span><span class="n">satellitePropagatorExamples</span><span class="o">/</span><span class="n">SatellitePropagatorExamples</span><span class="o">/</span><span class="n">thrustAccelerationFromFileExample</span><span class="o">.</span><span class="n">cpp</span>
</pre></div>
</div>
<p>The main difference of this example w.r.t. the previous one lies in the following steps:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Loading discrete thrust data from a file</li>
<li>Creating an interpolator that turns the discrete data set into a continuous function</li>
<li>Creating settings for the thrust acceleration using these data.</li>
</ol>
</div></blockquote>
<div class="section" id="loading-the-data">
<h2>6.1. Loading the data<a class="headerlink" href="#loading-the-data" title="Permalink to this headline">¶</a></h2>
<p>Reading data from a file can be done in many different ways. Since the manner in which a file is read depends on the structure of the particular file, there can be many different approaches (and file readers) for different applications. Here, we chose a very basic setup in which the thrust file is set up as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">0</span>       <span class="mi">0</span> <span class="mi">0</span> <span class="mi">5</span>
<span class="mi">6068</span>    <span class="mi">0</span> <span class="mi">1</span> <span class="mi">5</span>
<span class="mi">6097</span>    <span class="mf">1.0</span> <span class="mi">0</span> <span class="mi">5</span>
<span class="mf">6097.5</span>  <span class="mf">0.8</span> <span class="mi">0</span> <span class="mi">5</span>
<span class="mi">6098</span>    <span class="mf">0.6</span> <span class="mf">0.1</span> <span class="mi">5</span>
<span class="mi">6099</span>    <span class="mf">0.1</span> <span class="mf">0.5</span> <span class="mi">5</span>
<span class="mi">12192</span>   <span class="mf">0.2</span> <span class="mf">1.0</span> <span class="mf">4.5</span>
<span class="mi">18288</span>   <span class="mf">0.3</span> <span class="mf">1.5</span> <span class="mf">4.0</span>
<span class="mi">243575</span>  <span class="mf">0.4</span> <span class="mf">2.0</span> <span class="mf">3.0</span>
<span class="mf">3.999e6</span> <span class="mf">1.0</span> <span class="mf">1.0</span> <span class="mf">2.0</span>
<span class="mf">4e6</span>     <span class="mf">1.1</span> <span class="mf">5.0</span> <span class="mf">1.0</span>
</pre></div>
</div>
<p>The first column of this file represents a time, the following three columns represent the x-, y- and z-components of the thrust force vector. To load these data into Tudat, we use the following custom function:</p>
<blockquote>
<div><div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span> <span class="kt">double</span><span class="p">,</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span> <span class="o">&gt;</span> <span class="n">getThrustData</span><span class="p">(</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Find filepath and folder of this cpp file</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cppFilePath</span><span class="p">(</span> <span class="n">__FILE__</span> <span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cppFolder</span> <span class="o">=</span> <span class="n">cppFilePath</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span> <span class="mi">0</span> <span class="p">,</span> <span class="n">cppFilePath</span><span class="p">.</span><span class="n">find_last_of</span><span class="p">(</span><span class="s">&quot;/</span><span class="se">\\</span><span class="s">&quot;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span> <span class="p">);</span>

    <span class="c1">// Load data into matrix</span>
    <span class="n">Eigen</span><span class="o">::</span><span class="n">MatrixXd</span> <span class="n">thrustForceMatrix</span> <span class="o">=</span>
            <span class="n">tudat</span><span class="o">::</span><span class="n">input_output</span><span class="o">::</span><span class="n">readMatrixFromFile</span><span class="p">(</span> <span class="n">cppFolder</span> <span class="o">+</span> <span class="s">&quot;testThrustValues.txt&quot;</span> <span class="p">,</span> <span class="s">&quot; </span><span class="se">\t</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;#&quot;</span> <span class="p">);</span>

    <span class="c1">// Fill thrustData map using thrustForceMatrix Eigen matrix</span>
    <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span> <span class="kt">double</span><span class="p">,</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span> <span class="o">&gt;</span> <span class="n">thrustData</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">thrustForceMatrix</span><span class="p">.</span><span class="n">rows</span><span class="p">(</span> <span class="p">);</span> <span class="n">i</span><span class="o">++</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">thrustForceMatrix</span><span class="p">.</span><span class="n">block</span><span class="p">(</span> <span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span> <span class="p">).</span><span class="n">transpose</span><span class="p">(</span> <span class="p">);</span>
        <span class="n">thrustData</span><span class="p">[</span> <span class="n">thrustForceMatrix</span><span class="p">(</span> <span class="n">i</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">thrustData</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>First, we need to specify the location of the file we wish to load. To do this, we retrieve the strong containing current file (e.g. the .cpp file with the source code of the example) as follows:</p>
<blockquote>
<div><div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cppFilePath</span><span class="p">(</span> <span class="n">__FILE__</span> <span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>Subsequently, we strip of the name of the current file as follows:</p>
<blockquote>
<div><div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cppFolder</span> <span class="o">=</span> <span class="n">cppFilePath</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span> <span class="mi">0</span> <span class="p">,</span> <span class="n">cppFilePath</span><span class="p">.</span><span class="n">find_last_of</span><span class="p">(</span><span class="s">&quot;/</span><span class="se">\\</span><span class="s">&quot;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span> <span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>Don’t worry if the details of these steps escape you. What is important is to know that the&nbsp;cppFolder&nbsp;now contains the location of the current directory. We now load the data into an&nbsp;Eigen::MatrixXd&nbsp;using a Tudat function&nbsp;readMatrixFromFile, located in&nbsp;InputOutput/matrixTextFileReader.cpp&nbsp;as follows:</p>
<blockquote>
<div><div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="c1">// Load data into matrix</span>
<span class="n">Eigen</span><span class="o">::</span><span class="n">MatrixXd</span> <span class="n">thrustForceMatrix</span> <span class="o">=</span>
        <span class="n">tudat</span><span class="o">::</span><span class="n">input_output</span><span class="o">::</span><span class="n">readMatrixFromFile</span><span class="p">(</span> <span class="n">cppFolder</span> <span class="o">+</span> <span class="s">&quot;testThrustValues.txt&quot;</span> <span class="p">,</span> <span class="s">&quot; </span><span class="se">\t</span><span class="s">&quot;</span> <span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>The first argument to the&nbsp;readMatrixFromFile&nbsp;denotes the full file location of our&nbsp;testThrustValues.txt&nbsp;file containing the thrust data. The second argument:&nbsp;” t”&nbsp;denotes that both spaces and tabs (t) are considered separators for the file contents (points in the file where a new entry starts). To use the interpolator, we want to have our thrust data in a map, with the time as key and thrust vector as value. The following block of code converts the&nbsp;Eigen::MatrixXd&nbsp;to a&nbsp;std::map&lt; double, Eigen::Vector3d &gt;</p>
<blockquote>
<div><div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="c1">// Fill thrustData map using thrustForceMatrix Eigen matrix</span>
<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span> <span class="kt">double</span><span class="p">,</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span> <span class="o">&gt;</span> <span class="n">thrustData</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">thrustForceMatrix</span><span class="p">.</span><span class="n">rows</span><span class="p">(</span> <span class="p">);</span> <span class="n">i</span><span class="o">++</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="n">thrustData</span><span class="p">[</span> <span class="n">thrustForceMatrix</span><span class="p">(</span> <span class="n">i</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">]</span> <span class="o">=</span> <span class="n">thrustForceMatrix</span><span class="p">.</span><span class="n">block</span><span class="p">(</span> <span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span> <span class="p">).</span><span class="n">transpose</span><span class="p">(</span> <span class="p">);</span>
<span class="p">}</span>
<span class="k">return</span> <span class="n">thrustData</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="creating-the-interpolator">
<h2>6.2. Creating the interpolator<a class="headerlink" href="#creating-the-interpolator" title="Permalink to this headline">¶</a></h2>
<p>We now have a map with time vs. thrust force. To pass this information to the acceleration settings, we need to turn this discrete data into a continuous function, for which we use an interpolator. Here, we choose to use a linear interpolator. For a list of the various other interpolation options, details of their implementation, and instructions on how to use/create them,&nbsp;this wiki page. For this example, we use the following code to create an interpolator of the thrust vector:</p>
<blockquote>
<div><div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="c1">// Retrieve thrust data as function of time.</span>
<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span> <span class="kt">double</span><span class="p">,</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span> <span class="o">&gt;</span> <span class="n">thrustData</span> <span class="o">=</span> <span class="n">getThrustData</span><span class="p">(</span> <span class="p">);</span>

<span class="c1">// Make interpolator</span>
<span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">InterpolatorSettings</span> <span class="o">&gt;</span>
        <span class="n">thrustInterpolatorSettingsPointer</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">InterpolatorSettings</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">linear_interpolator</span> <span class="p">);</span>

<span class="c1">// Creating settings for thrust force</span>
<span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">OneDimensionalInterpolator</span><span class="o">&lt;</span> <span class="kt">double</span><span class="p">,</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span> <span class="o">&gt;</span> <span class="o">&gt;</span>
        <span class="n">thrustInterpolatorPointer</span> <span class="o">=</span> <span class="n">createOneDimensionalInterpolator</span><span class="o">&lt;</span> <span class="kt">double</span><span class="p">,</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span> <span class="o">&gt;</span><span class="p">(</span>
           <span class="n">thrustData</span><span class="p">,</span> <span class="n">thrustInterpolatorSettingsPointer</span> <span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>The first line reads the map from the file we have specified. The following part:</p>
<blockquote>
<div><div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="c1">// Make interpolator</span>
<span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">InterpolatorSettings</span> <span class="o">&gt;</span>
        <span class="n">thrustInterpolatorSettingsPointer</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">InterpolatorSettings</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">linear_interpolator</span> <span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>creates an object that contains the settings for how to create the interpolator. For this application, this means specifying that the interpolator should be of the type&nbsp;linear_interpolator. Note that this setup is very similar to how an environment/acceleration/etc. model is set up.
The interpolator is then created by calling:</p>
<blockquote>
<div><div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="c1">// Creating settings for thrust force</span>
<span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">OneDimensionalInterpolator</span><span class="o">&lt;</span> <span class="kt">double</span><span class="p">,</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span> <span class="o">&gt;</span> <span class="o">&gt;</span>
       <span class="n">thrustInterpolatorPointer</span> <span class="o">=</span> <span class="n">createOneDimensionalInterpolator</span><span class="o">&lt;</span> <span class="kt">double</span><span class="p">,</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span> <span class="o">&gt;</span><span class="p">(</span>
            <span class="n">thrustData</span><span class="p">,</span> <span class="n">thrustInterpolatorSettingsPointer</span> <span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>The type&nbsp;boost::shared_ptr&lt; OneDimensionalInterpolator&lt; double, Eigen::Vector3d &gt; &gt;&nbsp;is the pointer to our interpolator. The bit&nbsp;&lt; double, Eigen::Vector3d &gt;&nbsp;denotes that the independent variable is a double (time) and the dependent variable is a&nbsp;Eigen::Vector3d(thrust). The two arguments provided to the&nbsp;createOneDimensionalInterpolator&nbsp;function is firstly the map containing the data, and secondly the object containing the settings to be used for creating the interpolator.</p>
</div>
<div class="section" id="creating-the-thrust-acceleration">
<h2>6.3. Creating the thrust acceleration.<a class="headerlink" href="#creating-the-thrust-acceleration" title="Permalink to this headline">¶</a></h2>
<p>The creation of the thrust acceleration is done similarly as in the previous example, by creating an object of type&nbsp;ThrustAccelerationSettings, as follows:</p>
<blockquote>
<div><div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">double</span> <span class="n">constantSpecificImpulse</span> <span class="o">=</span> <span class="mf">3000.0</span><span class="p">;</span>

<span class="n">accelerationsOfVehicle</span><span class="p">[</span> <span class="s">&quot;Vehicle&quot;</span> <span class="p">].</span><span class="n">push_back</span><span class="p">(</span>
            <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">ThrustAccelerationSettings</span> <span class="o">&gt;</span><span class="p">(</span>
                <span class="n">thrustInterpolatorPointer</span><span class="p">,</span>
                <span class="n">boost</span><span class="o">::</span><span class="n">lambda</span><span class="o">::</span><span class="n">constant</span><span class="p">(</span> <span class="n">constantSpecificImpulse</span> <span class="p">),</span> <span class="n">lvlh_thrust_frame</span><span class="p">,</span> <span class="s">&quot;Earth&quot;</span> <span class="p">)</span> <span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>The input to the&nbsp;ThrustAccelerationSettings, however, is different from that used in the previous example. In fact, we use a different constructor here, an example of&nbsp;constructor overloading. The input required to the constructor we use here is:</p>
<blockquote>
<div><ul class="simple">
<li>The interpolator used to compute the thrust force vector as a function of time.</li>
<li>Function returning the specific impulse as a function of time (here constant at the 3000 s). If you are not familiar with&nbsp;boost::lambda::constant, have a look&nbsp;here.</li>
<li>The frame type in which the thrust vector is expressed.</li>
<li>The reference body for any frame transformation that may be required.</li>
</ul>
</div></blockquote>
<p>The last two argument define the frame orientation in which the thrust force produced by the&nbsp;thrustInterpolatorPointer&nbsp;is expressed. At present, there are two options:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Inertial frame: if this is the case, there is no need to specify a reference body. The interpolated thrust is used directly in the equations of motion, without and transformation.</li>
<li>Local-Vertical Local-Horizontal. This is a satellite-based frame in which the x-axis is colinear and in the direction of the velocity vector (relative to the reference body). The z-axis is perpendicular to the orbital plane (direction of cross-product of velocity with postion) and the y-axis completes the system.</li>
</ol>
</div></blockquote>
<p>In this example, we use the second option, basing the thrust direction on the current Earth-centered position of the spacecraft.</p>
<p>The rest of the application, including the definition of the mass propagation, is set up analogously to the previous example, with a single addition: two dependent variables are saved during the propagation, the thrust acceleration, and the rotation matrix from LVLH to inertial frame. Note that when saving an acceleration, it is&nbsp;always&nbsp;saved as expressed in the inertial frame. We also save the rotation matrix here, to reconstruct the original thrust profile that we provided, checking the correct implementation.</p>
</div>
<div class="section" id="results">
<h2>6.4. Results<a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h2>
<p>Below, we show the resulting orbit of the spacecraft w.r.t. the Earth. Clearly, the thrust force that we apply has a significant effect, changing the orbital plane and increasing the spacecraft’s mean distance from the Earth.</p>
<p>We also show plots of the acceleration (in an inertial frame) and force (in the LVLH frame) due to the thrust. The thrust profile clearly shows the linearly interpolated behaviour from our input data. For the acceleration, the once-per-orbit signature of the transformation is clearly visible.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="earthOrbiterStateEstimation.html" class="btn btn-neutral float-right" title="7. Orbit Determination and Parameter Estimation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="useOfThrustThrustForceAlongVelocityVector.html" class="btn btn-neutral" title="5. Use of Thrust: Thrust Force Along Velocity Vector" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Delft University of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>