

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Apollo Capsule Entry &mdash; TU Delft Astrodynamic Toolbox  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../../search.html"/>
    <link rel="top" title="TU Delft Astrodynamic Toolbox  documentation" href="../../../../index.html"/>
        <link rel="up" title="Tutorials" href="../index.html"/>
        <link rel="next" title="Perturbed Earth-orbiting satellite lifetime maximisation using a custom C++ application" href="../lifetimeMaximisationCPP/index.html"/>
        <link rel="prev" title="Perturbed Earth-orbiting satellite lifetime maximisation" href="../lifetimeMaximisation/index.html"/> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> TU Delft Astrodynamic Toolbox
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../index.html">Start Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Tutorials and Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../prerequiredKnowledge/index.html">Pre-required Knowledge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../applicationWalkthroughs/index.html">Application Walkthroughs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tudatFeatures/index.html">Tudat Libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">JSON Interface</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../keys/index.html">List of keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modularFiles.html">Modular files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../multicase.html">Multi-case simulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../customJsonApp.html">Writing custom JSON-based applications</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">Tutorials</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../unperturbedSatellite/index.html">Unperturbed Earth-orbiting satellite</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lifetimeMaximisation/index.html">Perturbed Earth-orbiting satellite lifetime maximisation</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Apollo Capsule Entry</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lifetimeMaximisationCPP/index.html">Perturbed Earth-orbiting satellite lifetime maximisation using a custom C++ application</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../matlabInterface/index.html">MATLAB Interface</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developerGuide/index.html">Developer Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">TU Delft Astrodynamic Toolbox</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../index.html">Tutorials and Documentation</a> &raquo;</li>
        
          <li><a href="../../index.html">JSON Interface</a> &raquo;</li>
        
          <li><a href="../index.html">Tutorials</a> &raquo;</li>
        
      <li>Apollo Capsule Entry</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/tutorials/jsonInterface/tutorials/apolloCapsuleEntry/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="apollo-capsule-entry">
<span id="jsoninterface-tutorials-apollocapsuleentry"></span><h1>Apollo Capsule Entry<a class="headerlink" href="#apollo-capsule-entry" title="Permalink to this headline">¶</a></h1>
<p>The example described on this page is that of Apollo on a reentry trajectory towards the surface of Earth. The code for this tutorial is located in your Tudat Bundle at:</p>
<div class="highlight-txt"><div class="highlight"><pre><span></span>tudatBundle/tudatExampleApplications/satellitePropagatorExamples/SatellitePropagatorExamples/apolloCapsuleEntryJSON.cpp
</pre></div>
</div>
<p>In this tutorial, the creation of a custom JSON-based application is described. Read first the general introduction on <a class="reference internal" href="../../customJsonApp.html#jsoninterface-customjsonapp"><span class="std std-ref">Writing custom JSON-based applications</span></a> and the example <a class="reference internal" href="../../../applicationWalkthroughs/unguidedCapsuleEntry.html#walkthroughsunguidedcapsuleentry"><span class="std std-ref">Un-guided Capsule Entry</span></a>, which is identical to this one but without the use of JSON files.</p>
<p>The Apollo capsule entry cannot be simulated using exclusively JSON input files and the <code class="docutils literal"><span class="pre">json_interface</span></code> application. Some of the Tudat features that this application uses cannot be provided using JSON files, and thus a custom JSON-based application, in which part of the settings are read from a JSON file and others specified manually using C++ code, has to be written.</p>
<p>The Tudat features that this application uses that are not supported by the JSON interface are:</p>
<blockquote>
<div><ul class="simple">
<li>Setting a body’s <code class="xref py py-class docutils literal"><span class="pre">AerodynamicCoefficientInterface</span></code> directly instead of using an <code class="xref py py-class docutils literal"><span class="pre">AerodynamicCoefficientSettings</span></code> object.</li>
<li>Using the function <code class="docutils literal"><span class="pre">tudat_applications::getOutputPath(</span> <span class="pre">)</span></code>.</li>
<li>Settings an angle of attach for a body.</li>
<li>Defining the initial state using spherical elements.</li>
</ul>
</div></blockquote>
<p>This functionality has to be implemented in the C++ application. However, as for any JSON-based application, the first step is to generate the input file. This file is located in your Tudat Bundle at:</p>
<div class="highlight-txt"><div class="highlight"><pre><span></span>tudatBundle/tudatExampleApplications/satellitePropagatorExamples/SatellitePropagatorExamples/apolloCapsuleEntry.json
</pre></div>
</div>
<p>A few remarks about the contents of this file can be made:</p>
<blockquote>
<div><ul class="simple">
<li>The key <span class="jsonkey">spice.preloadEphemeris</span> has to be set to <code class="docutils literal"><span class="pre">false</span></code> because the key <span class="jsonkey">finalEpoch</span> is not defined, so it is not possible to interpolate the ephemeris of celestial bodies.</li>
<li>For the body <code class="docutils literal"><span class="pre">Apollo</span></code>, only the mass is specified; the aerodynamic settings (including coefficients and reference area) will be loaded manually in the C++ application.</li>
<li>If the initial state is not defined, the JSON validator will throw an <code class="xref py py-class docutils literal"><span class="pre">UndefinedKeyError</span></code>. Thus, a placeholder initial state, which will be modified in the C++ app, is used for key <span class="jsonkey">propagators[0].initialStates</span>, which is set to <code class="docutils literal"><span class="pre">[0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0,</span> <span class="pre">0]</span></code>.</li>
<li>In the same way, since the key <span class="jsonkey">file</span> of the export settings is mandatory, a placeholder empty string is provided for <span class="jsonkey">export[0].file</span> and <span class="jsonkey">export[1].file</span>, which will be then redefined in the C++ application.</li>
<li>The variable representing Apollo’s altitude w.r.t. Earth is used twice: as termination condition and as dependent variable to be exported to an output file. Rather than repeating it twice, the key <span class="jsonkey">export[1].variables[1]</span> has been set to reference the termination’s variable by using the special string <code class="docutils literal"><span class="pre">&quot;${termination.variable}&quot;</span></code>.</li>
</ul>
</div></blockquote>
<p>Then, in the C++ app, as explained in <a class="reference internal" href="../../customJsonApp.html#jsoninterface-customjsonapp"><span class="std std-ref">Writing custom JSON-based applications</span></a>, a derived class of <code class="xref py py-class docutils literal"><span class="pre">JsonSimulationManager</span></code> has been created, providing custom implementations for the virtual methods <code class="docutils literal"><span class="pre">resetBodies</span></code>, <code class="docutils literal"><span class="pre">resetExportSettings</span></code> and <code class="docutils literal"><span class="pre">resetPropagatorSettings</span></code>:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ApolloJsonSimulationManager</span> <span class="o">:</span> <span class="k">public</span> <span class="n">tudat</span><span class="o">::</span><span class="n">json_interface</span><span class="o">::</span><span class="n">JsonSimulationManager</span><span class="o">&lt;</span> <span class="o">&gt;</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="c1">// Inherit constructor.</span>
    <span class="k">using</span> <span class="n">JsonSimulationManager</span><span class="o">&lt;</span> <span class="o">&gt;::</span><span class="n">JsonSimulationManager</span><span class="p">;</span>

<span class="k">protected</span><span class="o">:</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">resetBodies</span><span class="p">(</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="p">...</span>
    <span class="p">}</span>

    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">resetExportSettings</span><span class="p">(</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="p">...</span>
    <span class="p">}</span>

    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">resetPropagatorSettings</span><span class="p">(</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="p">...</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>For the <code class="docutils literal"><span class="pre">resetBodies</span></code> method, we first call the default implementation of the base class, and then we create Apollo’s aerodynamic coefficients interface manually, using a function defined in <code class="docutils literal"><span class="pre">tudat::unit_tests</span></code>:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="k">virtual</span> <span class="kt">void</span> <span class="nf">resetBodies</span><span class="p">(</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// First, call the original resetBodies, which uses the information in the JSON file</span>
    <span class="n">JsonSimulationManager</span><span class="o">::</span><span class="n">resetBodies</span><span class="p">(</span> <span class="p">);</span>

    <span class="c1">// Then, create vehicle&#39;s aerodynamic coefficients interface</span>
    <span class="n">getBody</span><span class="p">(</span> <span class="s">&quot;Apollo&quot;</span> <span class="p">)</span><span class="o">-&gt;</span><span class="n">setAerodynamicCoefficientInterface</span><span class="p">(</span> <span class="n">tudat</span><span class="o">::</span><span class="n">unit_tests</span><span class="o">::</span><span class="n">getApolloCoefficientInterface</span><span class="p">(</span> <span class="p">)</span> <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Note that we use the method <code class="docutils literal"><span class="pre">getBody(</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">bodyName</span> <span class="pre">)</span></code> of <code class="xref py py-class docutils literal"><span class="pre">JsonSimulationManager</span></code>, which retrieves the body named <code class="docutils literal"><span class="pre">bodyName</span></code> from the body map. If we want to create a new body manually, we use the method <code class="docutils literal"><span class="pre">addBody(</span> <span class="pre">const</span> <span class="pre">std::string&amp;</span> <span class="pre">bodyName</span> <span class="pre">)</span></code> (note that, if the body already exists, it will be reset to a body created with the empty constructor).</p>
<p>For the <code class="docutils literal"><span class="pre">resetExportSettings</span></code> method, we first call the default implementation of the base class, and then modify the output files paths using the function <code class="docutils literal"><span class="pre">tudat_applications::getOutputPath(</span> <span class="pre">)</span></code>:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="k">virtual</span> <span class="kt">void</span> <span class="nf">resetExportSettings</span><span class="p">(</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// First, call the original resetExportSettings, which uses the information in the JSON file</span>
    <span class="n">JsonSimulationManager</span><span class="o">::</span><span class="n">resetExportSettings</span><span class="p">(</span> <span class="p">);</span>

    <span class="c1">// Then, replace the output file paths (empty strings placeholders had been specified in the JSON file)</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">outputDirectory</span> <span class="o">=</span> <span class="n">tudat_applications</span><span class="o">::</span><span class="n">getOutputPath</span><span class="p">(</span> <span class="p">)</span> <span class="o">+</span> <span class="s">&quot;ApolloCapsuleExampleJSON/&quot;</span><span class="p">;</span>
    <span class="n">getExportSettings</span><span class="p">(</span> <span class="mi">0</span> <span class="p">)</span><span class="o">-&gt;</span><span class="n">setOutputFile</span><span class="p">(</span> <span class="n">outputDirectory</span> <span class="o">+</span> <span class="s">&quot;apolloPropagationHistory.dat&quot;</span> <span class="p">);</span>
    <span class="n">getExportSettings</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span><span class="o">-&gt;</span><span class="n">setOutputFile</span><span class="p">(</span> <span class="n">outputDirectory</span> <span class="o">+</span> <span class="s">&quot;apolloDependentVariableHistory.dat&quot;</span> <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this case, we use the method <code class="docutils literal"><span class="pre">getExportSettings(</span> <span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">index</span> <span class="pre">)</span></code>, which returns the <code class="xref py py-class docutils literal"><span class="pre">ExportSettings</span></code> object created from the key <span class="jsonkey">export[index]</span> in the JSON file.</p>
<p>Finally, we also override the method <code class="docutils literal"><span class="pre">resetPropagatorSettings</span></code>:</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">virtual</span> <span class="kt">void</span> <span class="nf">resetPropagatorSettings</span><span class="p">(</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// First, call the original resetPropagatorSettings, which uses the information in the JSON file</span>
    <span class="n">JsonSimulationManager</span><span class="o">::</span><span class="n">resetPropagatorSettings</span><span class="p">(</span> <span class="p">);</span>

    <span class="c1">// Define constant 30 degree angle of attack</span>
    <span class="kt">double</span> <span class="n">constantAngleOfAttack</span> <span class="o">=</span> <span class="mf">30.0</span> <span class="o">*</span> <span class="n">tudat</span><span class="o">::</span><span class="n">mathematical_constants</span><span class="o">::</span><span class="n">PI</span> <span class="o">/</span> <span class="mf">180.0</span><span class="p">;</span>
    <span class="n">getBody</span><span class="p">(</span> <span class="s">&quot;Apollo&quot;</span> <span class="p">)</span><span class="o">-&gt;</span><span class="n">getFlightConditions</span><span class="p">(</span> <span class="p">)</span><span class="o">-&gt;</span><span class="n">getAerodynamicAngleCalculator</span><span class="p">(</span> <span class="p">)</span><span class="o">-&gt;</span>
            <span class="n">setOrientationAngleFunctions</span><span class="p">(</span> <span class="n">boost</span><span class="o">::</span><span class="n">lambda</span><span class="o">::</span><span class="n">constant</span><span class="p">(</span> <span class="n">constantAngleOfAttack</span> <span class="p">)</span> <span class="p">);</span>

    <span class="c1">// Set spherical elements for Apollo.</span>
    <span class="k">using</span> <span class="k">namespace</span> <span class="n">tudat</span><span class="o">::</span><span class="n">orbital_element_conversions</span><span class="p">;</span>
    <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span> <span class="n">apolloSphericalEntryState</span><span class="p">;</span>
    <span class="n">apolloSphericalEntryState</span><span class="p">(</span> <span class="n">SphericalOrbitalStateElementIndices</span><span class="o">::</span><span class="n">radiusIndex</span> <span class="p">)</span> <span class="o">=</span>
            <span class="n">getBody</span><span class="p">(</span> <span class="s">&quot;Earth&quot;</span> <span class="p">)</span><span class="o">-&gt;</span><span class="n">getShapeModel</span><span class="p">(</span> <span class="p">)</span><span class="o">-&gt;</span><span class="n">getAverageRadius</span><span class="p">(</span> <span class="p">)</span> <span class="o">+</span> <span class="mf">120.0E3</span><span class="p">;</span>
    <span class="n">apolloSphericalEntryState</span><span class="p">(</span> <span class="n">SphericalOrbitalStateElementIndices</span><span class="o">::</span><span class="n">latitudeIndex</span> <span class="p">)</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
    <span class="n">apolloSphericalEntryState</span><span class="p">(</span> <span class="n">SphericalOrbitalStateElementIndices</span><span class="o">::</span><span class="n">longitudeIndex</span> <span class="p">)</span> <span class="o">=</span> <span class="mf">1.2</span><span class="p">;</span>
    <span class="n">apolloSphericalEntryState</span><span class="p">(</span> <span class="n">SphericalOrbitalStateElementIndices</span><span class="o">::</span><span class="n">speedIndex</span> <span class="p">)</span> <span class="o">=</span> <span class="mf">7.7E3</span><span class="p">;</span>
    <span class="n">apolloSphericalEntryState</span><span class="p">(</span> <span class="n">SphericalOrbitalStateElementIndices</span><span class="o">::</span><span class="n">flightPathIndex</span> <span class="p">)</span> <span class="o">=</span>
            <span class="o">-</span><span class="mf">0.9</span> <span class="o">*</span> <span class="n">tudat</span><span class="o">::</span><span class="n">mathematical_constants</span><span class="o">::</span><span class="n">PI</span> <span class="o">/</span> <span class="mf">180.0</span><span class="p">;</span>
    <span class="n">apolloSphericalEntryState</span><span class="p">(</span> <span class="n">SphericalOrbitalStateElementIndices</span><span class="o">::</span><span class="n">headingAngleIndex</span> <span class="p">)</span> <span class="o">=</span> <span class="mf">0.6</span><span class="p">;</span>

    <span class="c1">// Convert apollo state from spherical elements to Cartesian elements.</span>
    <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span> <span class="n">systemInitialState</span> <span class="o">=</span> <span class="n">convertSphericalOrbitalToCartesianState</span><span class="p">(</span> <span class="n">apolloSphericalEntryState</span> <span class="p">);</span>
    <span class="n">systemInitialState</span> <span class="o">=</span> <span class="n">tudat</span><span class="o">::</span><span class="n">ephemerides</span><span class="o">::</span><span class="n">transformStateToGlobalFrame</span><span class="p">(</span>
                <span class="n">systemInitialState</span><span class="p">,</span> <span class="n">getStartEpoch</span><span class="p">(</span> <span class="p">),</span> <span class="n">getBody</span><span class="p">(</span> <span class="s">&quot;Earth&quot;</span> <span class="p">)</span><span class="o">-&gt;</span><span class="n">getRotationalEphemeris</span><span class="p">(</span> <span class="p">)</span> <span class="p">);</span>

    <span class="c1">// Reset initial states (zero placeholder vector had been specified in the JSON file)</span>
    <span class="n">getPropagatorSettings</span><span class="p">(</span> <span class="p">)</span><span class="o">-&gt;</span><span class="n">resetInitialStates</span><span class="p">(</span> <span class="n">systemInitialState</span> <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>After calling the original implementation in line 4 (this won’t result in a JSON validation error because the the key <span class="jsonkey">propagators[0].initialStates</span> was defined with a placeholder value), we perform two tasks: defining an angle of attach for Apollo, in lines 9-11; and resetting the propagator’s initial states in lines 13-30.</p>
<p>The angle of attack is defined by modifying Apollo’s flight conditions. This can only be done once the flight conditions have been created, i.e. after <code class="docutils literal"><span class="pre">JsonSimulationManager::resetPropagatorSettings(</span> <span class="pre">)</span></code> has been called, since this method will create the acceleration aerodynamic models based on the body map created previously.</p>
<p>Then, we define the spherical initial state of Apollo, convert it to Cartesian components and transform it to the global frame, using Earth’s rotational ephemeris object, and the simulation start epoch, which can be retrieved using the method <code class="docutils literal"><span class="pre">getStartEpoch(</span> <span class="pre">)</span></code>. To get the simulation end epoch, the method <code class="docutils literal"><span class="pre">getEndEpoch(</span> <span class="pre">)</span></code> can be used, which will return <code class="docutils literal"><span class="pre">TUDAT_NAN</span></code> if no time termination condition has been defined. Once we have created the combined vector of initial states, <code class="docutils literal"><span class="pre">systemInitialState</span></code>, which must include all the states of all the bodies and propagators, we reset the propagator’s initial states in line 30. Note that <code class="docutils literal"><span class="pre">getPropagatorSettings(</span> <span class="pre">)</span></code> always return a <a class="reference internal" href="../../../tudatFeatures/propagationSetup/propagatorSettings.html#MultiTypePropagatorSettings" title="MultiTypePropagatorSettings"><code class="xref py py-class docutils literal"><span class="pre">MultiTypePropagatorSettings</span></code></a>, even when only one propagator is used (in which case it will only contain one <code class="xref py py-class docutils literal"><span class="pre">SingleArcPropagatorSettings</span></code>). The method <code class="docutils literal"><span class="pre">resetInitialStates</span></code> of <a class="reference internal" href="../../../tudatFeatures/propagationSetup/propagatorSettings.html#MultiTypePropagatorSettings" title="MultiTypePropagatorSettings"><code class="xref py py-class docutils literal"><span class="pre">MultiTypePropagatorSettings</span></code></a> will reset the states of the <em>children</em> single-arc propagators, as well as the combined states of the <em>parent</em> multi-type propagator.</p>
<p>Now, we can write our <code class="docutils literal"><span class="pre">main</span></code> function, which uses the custom class <code class="xref py py-class docutils literal"><span class="pre">ApolloJsonSimulationManager</span></code>:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cppFilePath</span><span class="p">(</span> <span class="n">__FILE__</span> <span class="p">);</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cppFolder</span> <span class="o">=</span> <span class="n">cppFilePath</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="n">cppFilePath</span><span class="p">.</span><span class="n">find_last_of</span><span class="p">(</span><span class="s">&quot;/</span><span class="se">\\</span><span class="s">&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">);</span>

    <span class="n">ApolloJsonSimulationManager</span> <span class="n">jsonSimulationManager</span><span class="p">(</span> <span class="n">cppFolder</span> <span class="o">+</span> <span class="s">&quot;apolloCapsuleEntry.json&quot;</span> <span class="p">);</span>
    <span class="n">jsonSimulationManager</span><span class="p">.</span><span class="n">updateSettings</span><span class="p">(</span> <span class="p">);</span>
    <span class="n">jsonSimulationManager</span><span class="p">.</span><span class="n">runPropagation</span><span class="p">(</span> <span class="p">);</span>
    <span class="n">jsonSimulationManager</span><span class="p">.</span><span class="n">exportResults</span><span class="p">(</span> <span class="p">);</span>

    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../lifetimeMaximisationCPP/index.html" class="btn btn-neutral float-right" title="Perturbed Earth-orbiting satellite lifetime maximisation using a custom C++ application" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../lifetimeMaximisation/index.html" class="btn btn-neutral" title="Perturbed Earth-orbiting satellite lifetime maximisation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Delft University of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header .arrow").click(function() {
            $(this).closest('.toggle').children().not(".header").toggle(400);
            $(this).toggleClass("open");
            // $(this).html() == "More" ? $(this).html('Less') : $(this).html('More');
        });
        $(".showall").click(function() {
            $(".toggle > *").show(400);
            $(".toggle .header .arrow").addClass("open");
        });
        $(".hideall").click(function() {
            $(".toggle > *").hide(400);
            $(".toggle .header").show(400);
            $(".toggle .header .arrow").removeClass("open");
        });
    });
</script>


</body>
</html>